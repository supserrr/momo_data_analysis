{% extends "base.html" %}

{% block title %}Dashboard - MoMo Data Analysis{% endblock %}
{% block subtitle %}Transaction Analytics Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Summary Cards -->
    <div class="stats-grid slide-up">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-exchange-alt"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-value" id="total-transactions">0</h3>
                <p class="stat-label">Total Transactions</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-value" id="total-amount">0 RWF</h3>
                <p class="stat-label">Total Amount</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-receipt"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-value" id="total-fees">0 RWF</h3>
                <p class="stat-label">Total Fees</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-value" id="avg-transaction">0 RWF</h3>
                <p class="stat-label">Average Transaction</p>
            </div>
        </div>
    </div>
    
    <!-- Charts Section -->
    <div class="charts-grid">
        <!-- Category Distribution -->
        <div class="chart-container fade-in">
            <h3 class="chart-title">Transaction Categories</h3>
            <div class="chart-wrapper">
                <canvas id="categoryChart"></canvas>
            </div>
        </div>
        
        <!-- Monthly Trend -->
        <div class="chart-container fade-in">
            <h3 class="chart-title">Monthly Transaction Trend</h3>
            <div class="chart-wrapper">
                <canvas id="monthlyChart"></canvas>
            </div>
        </div>
        
        <!-- Transaction Types -->
        <div class="chart-container fade-in">
            <h3 class="chart-title">Transaction Volume by Type</h3>
            <div class="chart-wrapper">
                <canvas id="volumeChart"></canvas>
            </div>
        </div>
        
        <!-- Top Recipients -->
        <div class="chart-container fade-in">
            <h3 class="chart-title">Category Breakdown</h3>
            <div id="category-breakdown" class="category-list"></div>
        </div>
    </div>
    
    <!-- Recent Transactions -->
    <div class="transactions-section fade-in">
        <h3 class="section-title">Recent Transactions</h3>
        <div class="table-container">
            <table class="transactions-table" id="transactions-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Category</th>
                        <th>Recipient</th>
                        <th>Amount</th>
                        <th>Fee</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody id="transactions-tbody">
                    <!-- Transactions will be loaded here -->
                </tbody>
            </table>
            <div class="pagination" id="pagination">
                <!-- Pagination will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="secondary-btn" onclick="window.location.href='/'">
            <i class="fas fa-plus"></i> Upload New File
        </button>
        <button class="primary-btn" id="export-btn">
            <i class="fas fa-download"></i> Export CSV
        </button>
        <button class="secondary-btn" id="clear-data-btn">
            <i class="fas fa-trash"></i> Clear Data
        </button>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
{% endblock %}